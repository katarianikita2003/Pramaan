{"ast":null,"code":"import { BrowserProvider, Contract, toBigInt } from \"ethers\";\nimport verifierABI from \"../contract/Verifier.json\";\n\n// Ensure contract address is correctly set\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS || \"0xYourDeployedContractAddress\";\n\n// ✅ Generate Proof Function\nexport const generateProof = async userId => {\n  // This function should ideally integrate with ZoKrates\n  // For now, it's a mock proof\n  return {\n    proof: {\n      a: [\"0x1\", \"0x2\"],\n      b: [[\"0x3\", \"0x4\"], [\"0x5\", \"0x6\"]],\n      c: [\"0x7\", \"0x8\"]\n    },\n    inputs: [userId]\n  };\n};\n\n// ✅ Verify Proof on Blockchain\nexport const verifyProofOnChain = async proof => {\n  if (!window.ethereum) {\n    alert(\"MetaMask is required!\");\n    return false;\n  }\n  await window.ethereum.request({\n    method: \"eth_requestAccounts\"\n  });\n  const provider = new BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  if (!CONTRACT_ADDRESS || CONTRACT_ADDRESS === \"0xYourDeployedContractAddress\") {\n    alert(\"⚠️ Contract address is missing! Set REACT_APP_CONTRACT_ADDRESS in .env.\");\n    return false;\n  }\n  const contract = new Contract(CONTRACT_ADDRESS, verifierABI, signer);\n  const {\n    proof: {\n      a,\n      b,\n      c\n    },\n    inputs\n  } = proof;\n  const formattedProof = {\n    a: [toBigInt(a[0]), toBigInt(a[1])],\n    b: [[toBigInt(b[0][0]), toBigInt(b[0][1])], [toBigInt(b[1][0]), toBigInt(b[1][1])]],\n    c: [toBigInt(c[0]), toBigInt(c[1])]\n  };\n  const formattedInputs = inputs.map(i => toBigInt(i));\n  return await contract.verifyTx(formattedProof, formattedInputs);\n};","map":{"version":3,"names":["BrowserProvider","Contract","toBigInt","verifierABI","CONTRACT_ADDRESS","process","env","REACT_APP_CONTRACT_ADDRESS","generateProof","userId","proof","a","b","c","inputs","verifyProofOnChain","window","ethereum","alert","request","method","provider","signer","getSigner","contract","formattedProof","formattedInputs","map","i","verifyTx"],"sources":["/mnt/d/pramaan/verifier_deployment/pramaan-dapp/src/utils/generateProof.js"],"sourcesContent":["import { BrowserProvider, Contract, toBigInt } from \"ethers\";\r\nimport verifierABI from \"../contract/Verifier.json\";\r\n\r\n// Ensure contract address is correctly set\r\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS || \"0xYourDeployedContractAddress\";\r\n\r\n// ✅ Generate Proof Function\r\nexport const generateProof = async (userId) => {\r\n    // This function should ideally integrate with ZoKrates\r\n    // For now, it's a mock proof\r\n    return {\r\n        proof: {\r\n            a: [\"0x1\", \"0x2\"],\r\n            b: [[\"0x3\", \"0x4\"], [\"0x5\", \"0x6\"]],\r\n            c: [\"0x7\", \"0x8\"]\r\n        },\r\n        inputs: [userId]\r\n    };\r\n};\r\n\r\n// ✅ Verify Proof on Blockchain\r\nexport const verifyProofOnChain = async (proof) => {\r\n    if (!window.ethereum) {\r\n        alert(\"MetaMask is required!\");\r\n        return false;\r\n    }\r\n\r\n    await window.ethereum.request({ method: \"eth_requestAccounts\" });\r\n\r\n    const provider = new BrowserProvider(window.ethereum);\r\n    const signer = await provider.getSigner();\r\n\r\n    if (!CONTRACT_ADDRESS || CONTRACT_ADDRESS === \"0xYourDeployedContractAddress\") {\r\n        alert(\"⚠️ Contract address is missing! Set REACT_APP_CONTRACT_ADDRESS in .env.\");\r\n        return false;\r\n    }\r\n\r\n    const contract = new Contract(CONTRACT_ADDRESS, verifierABI, signer);\r\n\r\n    const { proof: { a, b, c }, inputs } = proof;\r\n    const formattedProof = {\r\n        a: [toBigInt(a[0]), toBigInt(a[1])],\r\n        b: [\r\n            [toBigInt(b[0][0]), toBigInt(b[0][1])],\r\n            [toBigInt(b[1][0]), toBigInt(b[1][1])]\r\n        ],\r\n        c: [toBigInt(c[0]), toBigInt(c[1])]\r\n    };\r\n    const formattedInputs = inputs.map((i) => toBigInt(i));\r\n\r\n    return await contract.verifyTx(formattedProof, formattedInputs);\r\n};\r\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,QAAQ,EAAEC,QAAQ,QAAQ,QAAQ;AAC5D,OAAOC,WAAW,MAAM,2BAA2B;;AAEnD;AACA,MAAMC,gBAAgB,GAAGC,OAAO,CAACC,GAAG,CAACC,0BAA0B,IAAI,+BAA+B;;AAElG;AACA,OAAO,MAAMC,aAAa,GAAG,MAAOC,MAAM,IAAK;EAC3C;EACA;EACA,OAAO;IACHC,KAAK,EAAE;MACHC,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;MACjBC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;MACnCC,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK;IACpB,CAAC;IACDC,MAAM,EAAE,CAACL,MAAM;EACnB,CAAC;AACL,CAAC;;AAED;AACA,OAAO,MAAMM,kBAAkB,GAAG,MAAOL,KAAK,IAAK;EAC/C,IAAI,CAACM,MAAM,CAACC,QAAQ,EAAE;IAClBC,KAAK,CAAC,uBAAuB,CAAC;IAC9B,OAAO,KAAK;EAChB;EAEA,MAAMF,MAAM,CAACC,QAAQ,CAACE,OAAO,CAAC;IAAEC,MAAM,EAAE;EAAsB,CAAC,CAAC;EAEhE,MAAMC,QAAQ,GAAG,IAAIrB,eAAe,CAACgB,MAAM,CAACC,QAAQ,CAAC;EACrD,MAAMK,MAAM,GAAG,MAAMD,QAAQ,CAACE,SAAS,CAAC,CAAC;EAEzC,IAAI,CAACnB,gBAAgB,IAAIA,gBAAgB,KAAK,+BAA+B,EAAE;IAC3Ec,KAAK,CAAC,yEAAyE,CAAC;IAChF,OAAO,KAAK;EAChB;EAEA,MAAMM,QAAQ,GAAG,IAAIvB,QAAQ,CAACG,gBAAgB,EAAED,WAAW,EAAEmB,MAAM,CAAC;EAEpE,MAAM;IAAEZ,KAAK,EAAE;MAAEC,CAAC;MAAEC,CAAC;MAAEC;IAAE,CAAC;IAAEC;EAAO,CAAC,GAAGJ,KAAK;EAC5C,MAAMe,cAAc,GAAG;IACnBd,CAAC,EAAE,CAACT,QAAQ,CAACS,CAAC,CAAC,CAAC,CAAC,CAAC,EAAET,QAAQ,CAACS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnCC,CAAC,EAAE,CACC,CAACV,QAAQ,CAACU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEV,QAAQ,CAACU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACtC,CAACV,QAAQ,CAACU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEV,QAAQ,CAACU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACzC;IACDC,CAAC,EAAE,CAACX,QAAQ,CAACW,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEX,QAAQ,CAACW,CAAC,CAAC,CAAC,CAAC,CAAC;EACtC,CAAC;EACD,MAAMa,eAAe,GAAGZ,MAAM,CAACa,GAAG,CAAEC,CAAC,IAAK1B,QAAQ,CAAC0B,CAAC,CAAC,CAAC;EAEtD,OAAO,MAAMJ,QAAQ,CAACK,QAAQ,CAACJ,cAAc,EAAEC,eAAe,CAAC;AACnE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}